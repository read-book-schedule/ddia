#### 系统的瓶颈

##### 数据密集型应用：

1. 数据量
2. 数据复杂度
3. 数据的变化速度

##### 计算密集型应用：

1. 处理器的速度

#### 数据系统

###### 可靠性

意味着即使发生故障，系统也能正常工作。

故障------容错或韧性，针对特定类型的错误

人为制造故障来测试系统的可靠性-----混沌测试

硬件故障：硬盘崩溃、内存出错，机房断电。拔网线等等......

主要解决方案是硬件冗余，RAID，双路电源、热插拔等

软件故障：接收特定的错误输入、失控进程、依赖的服务异常、级联故障等

解决方案：仔细考虑系统中的假设胡交互、彻底的测试、进程隔离、允许崩溃和重启、测量和监控并分析

人为错误：运维配置错误事导致服务中断的首要原因

解决方案：设计系统减少犯错机会、解耦、各种测试，快读恢复

###### 可扩展性

意味着即使在负载增加的情况下也有保持性能的策略

系统应对负载增长的能力

纵向扩展和横向扩展

###### 课维护性

遗留系统和祖传代码没人愿意维护

可操作性----便于运维团队保持系统稳定。

简单性------尽可能的消除复杂度

可演化性------当需求变化时可以轻松的对系统进行更改

# 语言的边界就是思想的边界

#### 数据模型

##### 关系模型

数据库被组织成关系(**表**)，其中每个关系的元祖(**行**)是无序集合

一个关系(表)只是一个元祖(行)的集合而已。

##### 文档模型

网络模型：每条记录可能又多个父节点，记录之间的链接不是外键，而是像编程语言中的指针。记录访问的唯一方法是从跟记录起沿这些链路所形成的路径(**访问路径**)。查询是通过利用遍历记录列和跟随访问路径表在数据库中移动游标来执行的。

文档模型的局限性：不能直接引用文档中的嵌套的项目、对连接支持糟糕，当存在多对多关系时通常难以支持。

读时模式：数据的结构时隐含的，只有在数据被读取时才被解释。

写时模式：传统的关系数据库方法中，模式明确，且数据库确保所有的数据都符合其模式。

关系模型和文档模型的混合时未来数据库一条很好的路线。

#### 数据查询语言

SQL是一种**声明式**查询语言。IMS和CODASYL使用**命令式**代码来查询数据库

命令式语言告诉计算机已待定顺序执行某些操作

声明式语言只需要指定所需要数据的模式(即结果必须符合哪些条件)，以及如何将数据转换(但不是如何实现)。API更加简洁，具体的查询逻辑由特定的数据库引擎决定。适合并行执行。

MapReduce查询：用于在多台机器上批量处理大规模的数据。查询的逻辑用于代码片段来表示。

map的reduce函数在功能上的限制：它们必须时纯函数，只能使用传递给它们的数据作为输入，不能执行额外的数据库查询，也不能有任何副作用。

##### 图数据模型

由顶点(节点，实体)和边(关系，弧)组成。典型例子：社交图谱、网络图谱、公路和铁路网络

###### 属性图

每个顶点包括：唯一的标示符，一组出边，一组入边，一组属性

每条边包括：唯一标示符，边的起点/尾部顶点，边的终点/头部顶点，描述两个顶点之间关系类型的标签，一组属性

1. 任何顶点都可以有一条边连接到任何其他顶点
2. 给定任何顶点，可以高效地找到它的出边和入边，从而遍历图，即沿着一系列顶点的路径前后移动
3. 通过对不同类型的关系使用不同的标签，可以在一个图中存储几种不同inde信息，同时仍然保持一个清晰的数据模型

Cypher查询语言：属性图的声明式查询语言，为Neo4j图形数据库而发明

三元组存储和SPARQL

在三元组存储中，所有信息都已非常简单的三部分表示形式存储(主语、谓语、宾语)

主语相当于图中的一个顶点，宾语是一下两种情况：

1. 原始数据类型中的值，此时谓语和宾语相当于主语顶点上的属性的键和值。其实就是表示本节点的信息。
2. 图中的另一个顶点，此时谓语是图中的一条边，主语是其尾部顶点，宾语是其头部顶点。其实是表示两个节点及其关系

